---
title: 内容搜索和其他电子数据展示工具中的部分索引项
f1.keywords:
- NOCSH
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: ''
audience: Admin
ms.topic: reference
f1_keywords:
- ms.o365.cc.UnindexedItemsLearnMore
ms.service: O365-seccomp
ms.localizationpriority: medium
ms.collection:
- Strat_O365_IP
- M365-security-compliance
search.appverid:
- SPO160
- MOE150
- MET150
ms.assetid: d1691de4-ca0d-446f-a0d0-373a4fc8487b
description: 了解在搜索Exchange和SharePoint可包括在电子数据展示搜索中的未索引Microsoft 365 合规中心。
ms.openlocfilehash: b2d52ba6b518aba746a7c2b50b04d872c78b47ad
ms.sourcegitcommit: d4b867e37bf741528ded7fb289e4f6847228d2c5
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/06/2021
ms.locfileid: "60195601"
---
# <a name="partially-indexed-items-in-ediscovery"></a>电子数据展示中的部分索引项

从搜索运行电子数据展示搜索Microsoft 365 合规中心运行搜索时，会在估计的搜索结果中自动包含部分索引项。 部分索引项目Exchange邮箱项目和文档SharePoint OneDrive for Business由于某种原因未完全编制索引进行搜索的邮箱项目和文档。 在Exchange，部分索引项通常包含 (类型的文件，该文件类型无法) 电子邮件的索引。 下面是在运行电子数据展示搜索时无法为搜索编制索引和作为部分索引项返回的项目的其他一些原因：
  
- 文件类型是索引无法识别或不支持的文件类型。

- 邮件具有一个没有有效处理程序的附加文件，如图像文件;这是部分索引电子邮件项目的最常见原因。

- 文件类型支持检索，但是特定文件出现检索错误。

- 附加到电子邮件的文件过多。

- 附加到电子邮件的文件过大。

- 文件使用非 Microsoft 技术进行加密。

- 文件具有密码保护。

> [!NOTE]
> 大多数组织的内容量少于 1%，而按部分索引的大小，则小于 12%。 卷和大小差异的原因是，较大的文件包含无法完全编制索引的内容的可能性较高。
  
对于法律调查，您的组织可能需要查看部分索引项。 还可以指定在将搜索结果导出到本地计算机时，或在准备结果以使用特定方法进行分析时是否包含部分索引Advanced eDiscovery。 有关详细信息，请参阅调查 [电子数据展示中的部分索引项](investigating-partially-indexed-items-in-ediscovery.md)。
  
## <a name="file-types-not-indexed-for-search"></a>文件类型未编入索引以供搜索

某些类型的文件（如位图或 MP3 文件）不包含可编入索引的内容。 因此，Exchange和SharePoint索引服务器不会对此类文件执行全文检索。 这些文件类型视为不受支持的文件类型。 还有一些文件类型已默认或由管理员禁用全文检索。 不受支持和禁用的文件类型在内容搜索中标记为未索引项。 如前所述，运行搜索、将搜索结果导出到本地计算机或为搜索准备搜索结果时，部分索引项可包含在Advanced eDiscovery。
  
有关支持和禁用的文件格式列表，请参阅以下主题：
  
- **Exchange**  - [由搜索功能编制索引Exchange文件格式](/exchange/file-formats-indexed-by-exchange-search-exchange-2013-help)

- **Exchange**  - [Get-SearchDocumentFormat](/powershell/module/exchange/get-searchdocumentformat)

- **SharePoint**  - [文件中默认的已爬网文件扩展](/SharePoint/technical-reference/default-crawled-file-name-extensions-and-parsed-file-types)名和分析SharePoint
  
## <a name="messages-and-documents-with-partially-indexed-file-types-can-be-returned-in-search-results"></a>可以在搜索结果中返回具有部分索引文件类型的邮件和文档

并非每个包含部分索引文件附件的电子邮件或每个部分索引SharePoint都会自动返回为部分索引项。 这是因为其他邮件或文档属性（如电子邮件中的 **Subject** 属性和文档的 **Title** 或 **Author** 属性）已编制索引且可供搜索。 例如，如果关键字出现在电子邮件的主题或文档的文件名或标题中，则搜索"财务"的关键字将返回包含部分索引文件附件的项目。 但是，如果关键字只出现在文件的正文中，则邮件或文档将作为部分索引项返回。
  
同样，当其他邮件或文档属性（已编制索引且可搜索）与搜索条件匹配时，包含部分索引文件附件和部分索引文件类型的文档的邮件也包含在搜索结果中。 可检索的邮件属性包括发送和接收日期、发件人和收件人、附件的文件名以及邮件正文中的文本。 可检索的文档属性包括创建和修改日期。 因此，即使邮件附件可能是部分索引项，如果其他邮件或文档属性的值与搜索条件匹配，该邮件也会包含在常规搜索结果中。
  
有关可以使用 Microsoft 365 合规中心 中的电子数据展示工具搜索的电子邮件和文档属性的列表，请参阅关键字查询和电子数据展示的搜索[条件](keyword-queries-and-search-conditions.md)。
  
> [!NOTE]
> 如果将邮箱项目从已编制索引的文件夹移动到未编制索引的文件夹，则标志设置为未对项目编制索引，并且该项目将从索引中删除，并且不可搜索。 稍后，如果同一项目移回已编制索引的文件夹，则不重置标志。 这意味着该项目将保持未索引，并且不可搜索。

## <a name="partially-indexed-items-included-in-the-search-results"></a>搜索结果中包含的部分索引项

您的组织可能需要标识部分索引项并执行其他分析，以确定它们是什么、包含哪些内容以及它们是否与特定调查相关。 如前所述，搜索的内容位置中的部分索引项将自动包含在估计的搜索结果中。 在导出搜索结果或准备用于搜索的搜索结果时，可以选择包括这些部分索引Advanced eDiscovery。
  
对于部分索引项，请牢记以下事项：
  
- 运行电子数据展示搜索时，由搜索查询) 返回的部分索引 Exchange 项 (的总数和大小将显示在该飞出页上的搜索统计信息中，并标记为未编制 **索引的项目**。 有关显示在飞出页面上的部分索引项的统计信息不包括网站或网站SharePoint部分OneDrive项。

- 如果要导出结果的搜索是组织中特定内容位置或所有内容位置的搜索，则仅导出来自包含与搜索条件匹配的项的内容位置的未索引项目。 In other words, if no search results are found in a mailbox or site, then any unindexed items in that mailbox or site won't be exported. 这样做的原因是，从组织中很多位置导出部分索引项可能会增加导出错误的可能性，并增加导出和下载搜索结果所花的时间。

    若要从搜索的所有内容位置导出部分索引项，请配置搜索以返回所有项目 (，方法是从搜索查询) 中删除任何关键字，然后在导出搜索结果 (时仅导出部分索引项，方法是单击"输出选项 **) "** 下的"仅具有无法识别的格式的项目"、加密或由于其他原因未编制索引。

- 如果您选择在搜索结果中包括所有邮箱项目，或者搜索查询未指定任何关键字或只指定日期范围，则部分索引项目可能不会复制到包含部分索引项目的 PST 文件中。 这是因为所有项目（包括任何部分索引的项目）将自动包含在常规搜索结果中。

- 部分索引项无法预览。 您必须导出搜索结果，以查看搜索返回的部分索引项。

   此外，当您导出搜索结果并包括导出中的部分索引项时，来自 SharePoint 项目的部分索引项将导出到名为 **"不可检索"的文件夹**。 当您导出部分索引Exchange项时，根据部分索引项是否与搜索查询匹配以及导出设置的配置，导出这些项的方式会有所不同。 

- 下表显示了已索引项和部分索引项的导出行为，以及是否包含不同导出配置设置的每个项。

  |**导出配置**|**与搜索查询匹配的索引项**|**与搜索查询匹配的部分索引项**|**与搜索查询不匹配的部分索引项**|
  |:-----|:-----|:-----|:-----|
  |仅导出索引项  <br/> |Exported<br/> |导出 (导出的索引项中包含的) <br/>  |未导出 <br/>|
  |仅导出部分索引项  <br/> |未导出  <br/> |导出 (部分索引项) <br/> |导出 (部分索引项) |
  |导出索引项和部分索引项  <br/> |Exported<br/> |导出 (导出的索引项中包含的) <br/>  |导出 (部分索引项) <br/>|
  ||||
  
## <a name="workaround-for-using-a-date-range-to-exclude-partially-indexed-items"></a>使用日期范围排除部分索引项的解决方法

在内容搜索和核心电子数据展示中，你无法使用日期范围来排除搜索查询返回的部分索引项。 换句话说，超出日期范围的部分索引项仍作为部分索引项包含在搜索统计信息中，以及导出部分索引项时。 在Advanced eDiscovery中，可以使用搜索查询中的日期范围来排除部分索引项。

作为此限制的解决方法，我们建议执行以下过程。

1. 使用符合要求的搜索查询创建并运行搜索，并返回所需结果。

2. 导出步骤 1 中的搜索结果，但不要在导出中包括部分索引项。 为此，您可以选择"所有项目"（不包括那些具有无法识别的格式、已加密或由于其他原因未编制索引的项目 **）导出选项** 。<sup>1</sup>

   ![导出输出选项。](../media/ExportOutputOptions.png)

3. 创建并运行第二个使用相同搜索查询 (搜索步骤 1) 相同的位置。 使用 AND 运算符将以下子句追加 **到原始查询** ：

   ```text
   ((IndexingErrorCode>0 OR IndexingErrorCode<0) AND Date:date1…date2))
   ```
  
   添加此子句将返回符合原始搜索查询且位于特定日期范围内的部分索引项。<sup>2</sup>

4. 导出步骤 3 中的搜索结果，这次导出中包括部分索引项。 为此，可选择"所有项目"（包括无法识别的格式、已加密或由于其他原因未编制索引的项目）导出选项。

   > [!NOTE]
   > <sup>1</sup> 步骤 2 的输出仅会导致导出索引项。<br/>
   > <sup>2</sup> 步骤 3 中使用的条件仅标识具有指定日期范围内的索引错误的项。 它不会返回任何完全编制索引的项目。 这意味着在步骤 4 中导出的项目仅包括日期范围内未索引的项目。 导出不包括索引项。 因此，步骤 2 和步骤 4 的组合输出包含指定日期范围内的所有已编制索引和未编制索引的项目。

使用在步骤 3 中创建的第二个搜索和相应的导出来查看和了解与原始搜索查询匹配的部分索引项。 第二个搜索的导出还包括导出的所有部分索引项，以便你在必要时查看它们。

> [!TIP]
> 在上一过程中，您可以导出实际搜索结果或仅导出报告。

## <a name="indexing-limits-for-messages"></a>邮件的索引限制

下表介绍了索引限制，这些限制可能会导致电子邮件作为部分索引项返回在 Microsoft 365 中的电子数据展示搜索中。
  
有关文档索引限制SharePoint，请参阅 Search [limits for SharePoint Online](/sharepoint/search-limits)。
  
|**索引限制**|**注释**|**说明**|
|:-----|:-----|:-----|
|最大附件大小 (文件Excel文件)   <br/> |150 MB  <br/> |用于分析索引的电子邮件附件的最大大小。 任何大于此限制的附件将不会被分析为索引，并且包含附件的邮件将被标记为部分索引。  <br/><br/> **注意：** 分析是索引服务从附件中提取文本、删除标点符号和空格等不必要的字符，然后在名为词汇切分) 的过程中将文本划分为单词 (的过程，然后将这些字符存储在索引中。           |
|文件的最大Excel大小  <br/> |4 MB  <br/> |网站中或Excel附加到将进行分析以编制索引的电子邮件的文件的最大大小。 任何Excel超过此限制的文件都将不会进行分析，并且包含文件附件的文件或电子邮件将被标记为未索引。  <br/> |
|最大附件数  <br/> |250  <br/> |附加到电子邮件的最大文件数，将进行分析以编制索引。 如果邮件的附件超过 250 个，则对前 250 个附件进行分析和索引，邮件会标记为部分索引，因为它具有未分析的其他附件。  <br/> |
|最大附件深度  <br/> |30  <br/> |分析的最大嵌套附件数。 例如，如果电子邮件附加了另一封邮件，并且附加的邮件有一个附加的 Word 文档，则 Word 文档和附加的邮件将被索引。 此行为将针对最多 30 个嵌套附件继续。  <br/> |
|附加图像的最大数量  <br/> |0  <br/> |附加到电子邮件的图像将被分析程序跳过，并且不会编制索引。  <br/> |
|分析项目所花费的最大时间  <br/> |30 秒  <br/> |分析项目以编制索引最多需要 30 秒。 如果分析时间超过 30 秒，该项目将标记为部分索引。  <br/> |
|最大分析程序输出  <br/> |200 万个字符  <br/> |来自已编制索引分析程序的文本输出的最大量。 例如，如果分析程序从文档中提取了 800 万个字符，则只对前 200 万个字符编制索引。  <br/> |
|最大批注令牌数  <br/> |200 万  <br/> |当对电子邮件编制索引时，每个单词都使用不同的处理指令进行批注，这些指令指定该单词的索引编制方式。 每组处理指令都称为注释令牌。 若要在电子邮件中维护Office 365，电子邮件的注释令牌限制为 200 万个。  <br/> |
|索引中的最大正文大小  <br/> |6700 万个字符  <br/> |电子邮件正文及其所有附件中的字符总数。 当对电子邮件编制索引时，邮件正文中以及所有附件的所有文本都连接在一个字符串中。 索引的此字符串的最大大小为 6700 万个字符。  <br/> |
|正文中的最大唯一标记数  <br/> |1 百万  <br/> |如前所述，令牌是从内容中提取文本、删除标点和空格，然后将它划分为存储在索引中的 (称为) 标记"的单词的结果。 例如，短语包含  `"cat, mouse, bird, dog, dog"` 5 个标记。 但是只有 4 个唯一令牌。 每封电子邮件有 100 万个唯一令牌的限制，这有助于防止索引使用随机令牌变得过大。  <br/> |
||||

## <a name="more-information-about-partially-indexed-items"></a>有关部分索引项详细信息

- 如前所述，由于邮件和文档属性及其元数据已编制索引，因此如果关键字出现在已编制索引的元数据中，则关键字搜索可能会返回结果。 不过，如果该关键字仅出现在文件类型不受支持的项目的内容中，则相同的关键字搜索可能不会返回相同的项目。 在这种情况下，该项目将作为部分索引项返回。

- 如果部分索引项因符合搜索查询条件而包括在搜索结果中，则它不会作为部分索引项包含在估计的搜索统计信息中。 此外，导出搜索结果时，它也不会包含在部分索引项中。

- 尽管文件类型受索引支持且已编制索引，但可能会存在索引或搜索错误，这些错误会导致文件作为部分索引项返回。 例如，搜索大型 Excel 文件可能部分成功 (因为前 4 MB 已编制) 但因文件大小超出限制而失败。 在这种情况下，可能会将相同的文件与搜索结果一起返回，并作为部分索引项返回。

- 使用 [Microsoft](encryption.md) 加密技术加密并附加到符合搜索条件的电子邮件的文件可以预览，并在导出时解密。 目前，使用 Microsoft 加密技术加密的文件 (存储在SharePoint或OneDrive for Business) 部分索引。

- 使用 S/MIME 加密的电子邮件已部分编制索引。 这包括带有或不带文件附件的加密邮件。

- 使用 Azure 权限管理保护的电子邮件会编制索引，如果与搜索查询匹配，则这些电子邮件将包含在搜索结果中。 受权限保护的电子邮件将被解密，可以预览和导出。 此功能要求您分配 RMS 解密角色，该角色默认分配给电子数据展示管理员角色组。

- 如果创建的基于查询的保留与电子数据展示案例相关联，则所有部分索引项将置于保留状态。 这包括与保留项的搜索查询条件不匹配的部分索引项。 有关创建基于查询电子数据展示保留项的信息，请参阅创建 [电子数据展示保留](create-ediscovery-holds.md)。

## <a name="see-also"></a>另请参阅

[调查电子数据展示中的部分索引项](investigating-partially-indexed-items-in-ediscovery.md)
